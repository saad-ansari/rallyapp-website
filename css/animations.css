/**
 * Rally Website - Premium Animation Styles
 * Enhanced CSS for GSAP-powered animations
 */

/* ============================================
   GSAP INITIAL STATES
   Elements start hidden, GSAP reveals them
   ============================================ */

/* Hero elements - start hidden for GSAP entrance */
.hero .hero-badge,
.hero .hero-checkmark,
.hero .split-text,
.hero .hero-subtitle,
.hero .hero-social-proof,
.hero .waitlist-form-wrapper,
.hero .score-card,
.hero .phone-mockup-container,
.hero .scroll-indicator {
  will-change: transform, opacity;
}

/* Remove old CSS animations - GSAP handles these now */
.hero .animate-fade-in,
.hero .animate-fade-in-up {
  animation: none !important;
}

/* ============================================
   BUTTON RIPPLE EFFECT
   ============================================ */

.btn-primary {
  position: relative;
  overflow: hidden;
}

.btn-ripple {
  position: absolute;
  width: 100px;
  height: 100px;
  margin-left: -50px;
  margin-top: -50px;
  background: rgba(255, 255, 255, 0.35);
  border-radius: 50%;
  pointer-events: none;
  transform: scale(0);
}

/* ============================================
   ENHANCED CARD HOVER STATES
   ============================================ */

.problem-card,
.step-card,
.feature-card,
.scope-card,
.rule-card {
  position: relative;
  overflow: hidden;
  transition:
    transform 0.4s cubic-bezier(0.16, 1, 0.3, 1),
    box-shadow 0.4s cubic-bezier(0.16, 1, 0.3, 1);
}

/* Spotlight glow that follows cursor */
.problem-card::before,
.step-card::before,
.feature-card::before,
.scope-card::before,
.rule-card::before {
  content: "";
  position: absolute;
  inset: 0;
  background: radial-gradient(
    600px circle at var(--mouse-x, 50%) var(--mouse-y, 50%),
    rgba(234, 88, 12, 0.1) 0%,
    transparent 40%
  );
  opacity: 0;
  transition: opacity 0.4s ease;
  pointer-events: none;
  z-index: 1;
}

.problem-card:hover::before,
.step-card:hover::before,
.feature-card:hover::before,
.scope-card:hover::before,
.rule-card:hover::before {
  opacity: 1;
}

/* Ensure content stays above spotlight */
.problem-card > *,
.step-card > *,
.feature-card > *,
.scope-card > *,
.rule-card > * {
  position: relative;
  z-index: 2;
}

/* ============================================
   ENHANCED HOVER TRANSFORMS
   ============================================ */

.problem-card:hover,
.step-card:hover,
.feature-card:hover {
  transform: translateY(-8px) scale(1.02);
  box-shadow:
    0 20px 40px -10px rgba(0, 0, 0, 0.15),
    0 0 0 1px rgba(234, 88, 12, 0.1);
}

.scope-card:hover,
.rule-card:hover {
  transform: translateY(-4px) scale(1.01);
}

/* ============================================
   SCORE RING ENHANCEMENTS
   ============================================ */

.score-ring {
  position: relative;
}

/* Glow effect behind score ring */
.score-ring::before {
  content: "";
  position: absolute;
  inset: -10px;
  border-radius: 50%;
  background: radial-gradient(
    circle,
    rgba(234, 179, 8, 0.2) 0%,
    transparent 70%
  );
  opacity: 0;
  transition: opacity 0.5s ease;
}

.score-card:hover .score-ring::before {
  opacity: 1;
}

/* ============================================
   PHONE MOCKUP ENHANCEMENTS
   ============================================ */

.phone-frame {
  transform-style: preserve-3d;
  will-change: transform;
}

.phone-glow {
  will-change: transform, opacity;
}

/* Screenshot transition improvements */
.phone-screenshot {
  will-change: opacity, transform;
  backface-visibility: hidden;
}

/* ============================================
   FLOATING CARD IMPROVEMENTS
   ============================================ */

.floating-card {
  transform-style: preserve-3d;
  will-change: transform, box-shadow;
}

.floating-card:hover {
  box-shadow:
    0 30px 60px -20px rgba(0, 0, 0, 0.2),
    0 0 60px rgba(234, 88, 12, 0.15);
}

/* ============================================
   LEADERBOARD ROW ANIMATIONS
   ============================================ */

.leaderboard-row {
  will-change: transform, background-color;
}

.leaderboard-row:hover {
  transform: translateX(8px) scale(1.01);
}

/* Stagger animation setup for GSAP */
.leaderboard-list .leaderboard-row {
  opacity: 1; /* Will be controlled by GSAP */
}

/* ============================================
   TIER CARD ANIMATIONS
   ============================================ */

.tier-card {
  will-change: transform, box-shadow, border-color;
  transition:
    transform 0.3s cubic-bezier(0.16, 1, 0.3, 1),
    box-shadow 0.3s cubic-bezier(0.16, 1, 0.3, 1),
    border-color 0.3s ease;
}

.tier-card:hover {
  transform: translateX(12px) scale(1.02);
}

.tier-card.active {
  transform: translateX(12px) scale(1.03);
}

/* ============================================
   WAITLIST FORM ENHANCEMENTS
   ============================================ */

.waitlist-form .input-group {
  will-change: transform, box-shadow;
  transition:
    transform 0.3s cubic-bezier(0.16, 1, 0.3, 1),
    box-shadow 0.3s cubic-bezier(0.16, 1, 0.3, 1),
    border-color 0.3s ease;
}

.waitlist-input::placeholder {
  transition: color 0.3s ease;
}

.waitlist-input:focus::placeholder {
  color: transparent;
}

/* ============================================
   GRADIENT MESH BACKGROUND - HERO
   ============================================ */

.hero::before {
  animation: gradient-mesh-morph 20s ease-in-out infinite;
}

@keyframes gradient-mesh-morph {
  0%,
  100% {
    opacity: 1;
    background:
      radial-gradient(
        ellipse 80% 50% at 50% -20%,
        rgba(251, 146, 60, 0.18),
        transparent
      ),
      radial-gradient(
        ellipse 60% 40% at 80% 60%,
        rgba(234, 88, 12, 0.1),
        transparent
      ),
      radial-gradient(
        ellipse 50% 30% at 20% 80%,
        rgba(194, 65, 12, 0.08),
        transparent
      );
  }
  25% {
    opacity: 0.9;
    background:
      radial-gradient(
        ellipse 70% 60% at 60% -10%,
        rgba(251, 146, 60, 0.2),
        transparent
      ),
      radial-gradient(
        ellipse 50% 50% at 90% 50%,
        rgba(234, 88, 12, 0.12),
        transparent
      ),
      radial-gradient(
        ellipse 60% 40% at 10% 70%,
        rgba(194, 65, 12, 0.1),
        transparent
      );
  }
  50% {
    opacity: 1;
    background:
      radial-gradient(
        ellipse 90% 40% at 40% -30%,
        rgba(251, 146, 60, 0.15),
        transparent
      ),
      radial-gradient(
        ellipse 70% 35% at 70% 70%,
        rgba(234, 88, 12, 0.08),
        transparent
      ),
      radial-gradient(
        ellipse 40% 50% at 30% 90%,
        rgba(194, 65, 12, 0.12),
        transparent
      );
  }
  75% {
    opacity: 0.95;
    background:
      radial-gradient(
        ellipse 75% 55% at 55% -15%,
        rgba(251, 146, 60, 0.17),
        transparent
      ),
      radial-gradient(
        ellipse 55% 45% at 85% 55%,
        rgba(234, 88, 12, 0.11),
        transparent
      ),
      radial-gradient(
        ellipse 55% 35% at 15% 75%,
        rgba(194, 65, 12, 0.09),
        transparent
      );
  }
}

/* ============================================
   CHECKMARK DRAW ANIMATION
   ============================================ */

.checkmark-path {
  stroke-dasharray: 100;
  stroke-dashoffset: 100;
  /* Will be animated by GSAP */
}

/* ============================================
   SCROLL INDICATOR BOUNCE
   ============================================ */

.scroll-indicator {
  animation: scroll-bounce 2s ease-in-out infinite;
}

@keyframes scroll-bounce {
  0%,
  20%,
  50%,
  80%,
  100% {
    transform: translateX(-50%) translateY(0);
  }
  40% {
    transform: translateX(-50%) translateY(-12px);
  }
  60% {
    transform: translateX(-50%) translateY(-6px);
  }
}

/* ============================================
   SECTION DIVIDERS
   ============================================ */

.problem-section,
.solution-section,
.how-section,
.leaderboard-section,
.features-section,
.cta-section {
  position: relative;
}

/* Subtle gradient transition between sections */
.problem-section::before {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 200px;
  background: linear-gradient(
    180deg,
    var(--color-bg-base) 0%,
    transparent 100%
  );
  pointer-events: none;
  z-index: 0;
}

/* ============================================
   ICON HOVER ANIMATIONS
   ============================================ */

.feature-icon-wrapper,
.step-icon,
.problem-icon,
.scope-icon,
.rule-icon {
  transition:
    transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1),
    box-shadow 0.3s ease;
}

.feature-card:hover .feature-icon-wrapper,
.step-card:hover .step-icon,
.problem-card:hover .problem-icon {
  transform: scale(1.1) rotate(-5deg);
}

.scope-card:hover .scope-icon,
.rule-card:hover .rule-icon {
  transform: scale(1.15);
}

/* ============================================
   TEXT GRADIENT SHIMMER
   ============================================ */

.text-gradient {
  background-size: 300% auto;
  animation: text-shimmer 4s linear infinite;
}

@keyframes text-shimmer {
  0% {
    background-position: 0% center;
  }
  100% {
    background-position: 300% center;
  }
}

/* ============================================
   REDUCED MOTION SUPPORT
   ============================================ */

@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }

  .floating-card,
  .phone-frame,
  .orb {
    animation: none !important;
  }

  .scroll-indicator {
    display: none;
  }
}

/* ============================================
   PERFORMANCE OPTIMIZATIONS
   ============================================ */

/* GPU-accelerate animated elements */
.orb,
.phone-frame,
.floating-card,
.btn-primary,
.leaderboard-row,
.tier-card {
  transform: translateZ(0);
  backface-visibility: hidden;
}

/* Reduce paint areas */
.grain-overlay {
  contain: strict;
}

.orbs-container {
  contain: layout style;
}
